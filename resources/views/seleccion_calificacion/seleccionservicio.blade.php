@extends('layouts.app')

<script type="text/javascript">
function cal_estrella_1(){
document.getElementById('cal_estrella_1').style.color = '#7AB518'
document.getElementById('cal_estrella_2').style.color = '#888'
document.getElementById('cal_estrella_3').style.color = '#888'
document.getElementById('cal_estrella_4').style.color = '#888'
document.getElementById('cal_estrella_5').style.color = '#888'
document.getElementById('calidad').value = '1'};
function cal_estrella_2(){
document.getElementById('cal_estrella_1').style.color = '#7AB518'
document.getElementById('cal_estrella_2').style.color = '#7AB518'
document.getElementById('cal_estrella_3').style.color = '#888'
document.getElementById('cal_estrella_4').style.color = '#888'
document.getElementById('cal_estrella_5').style.color = '#888'
document.getElementById('calidad').value = '2'};
function cal_estrella_3(){
document.getElementById('cal_estrella_1').style.color = '#7AB518'
document.getElementById('cal_estrella_2').style.color = '#7AB518'
document.getElementById('cal_estrella_3').style.color = '#7AB518'
document.getElementById('cal_estrella_4').style.color = '#888'
document.getElementById('cal_estrella_5').style.color = '#888'
document.getElementById('calidad').value = '3'};
function cal_estrella_4(){
document.getElementById('cal_estrella_1').style.color = '#7AB518'
document.getElementById('cal_estrella_2').style.color = '#7AB518'
document.getElementById('cal_estrella_3').style.color = '#7AB518'
document.getElementById('cal_estrella_4').style.color = '#7AB518'
document.getElementById('cal_estrella_5').style.color = '#888'
document.getElementById('calidad').value = '4'};
function cal_estrella_5(){
document.getElementById('cal_estrella_1').style.color = '#7AB518'
document.getElementById('cal_estrella_2').style.color = '#7AB518'
document.getElementById('cal_estrella_3').style.color = '#7AB518'
document.getElementById('cal_estrella_4').style.color = '#7AB518'
document.getElementById('cal_estrella_5').style.color = '#7AB518'
document.getElementById('calidad').value = '5'};
function pun_estrella_1(){
document.getElementById('pun_estrella_1').style.color = '#7AB518'
document.getElementById('pun_estrella_2').style.color = '#888'
document.getElementById('pun_estrella_3').style.color = '#888'
document.getElementById('pun_estrella_4').style.color = '#888'
document.getElementById('pun_estrella_5').style.color = '#888'
document.getElementById('puntualidad').value = '1'};
function pun_estrella_2(){
document.getElementById('pun_estrella_1').style.color = '#7AB518'
document.getElementById('pun_estrella_2').style.color = '#7AB518'
document.getElementById('pun_estrella_3').style.color = '#888'
document.getElementById('pun_estrella_4').style.color = '#888'
document.getElementById('pun_estrella_5').style.color = '#888'
document.getElementById('puntualidad').value = '2'};
function pun_estrella_3(){
document.getElementById('pun_estrella_1').style.color = '#7AB518'
document.getElementById('pun_estrella_2').style.color = '#7AB518'
document.getElementById('pun_estrella_3').style.color = '#7AB518'
document.getElementById('pun_estrella_4').style.color = '#888'
document.getElementById('pun_estrella_5').style.color = '#888'
document.getElementById('puntualidad').value = '3'};
function pun_estrella_4(){
document.getElementById('pun_estrella_1').style.color = '#7AB518'
document.getElementById('pun_estrella_2').style.color = '#7AB518'
document.getElementById('pun_estrella_3').style.color = '#7AB518'
document.getElementById('pun_estrella_4').style.color = '#7AB518'
document.getElementById('pun_estrella_5').style.color = '#888'
document.getElementById('puntualidad').value = '4'};
function pun_estrella_5(){
document.getElementById('pun_estrella_1').style.color = '#7AB518'
document.getElementById('pun_estrella_2').style.color = '#7AB518'
document.getElementById('pun_estrella_3').style.color = '#7AB518'
document.getElementById('pun_estrella_4').style.color = '#7AB518'
document.getElementById('pun_estrella_5').style.color = '#7AB518'
document.getElementById('puntualidad').value = '5'};
function pp_estrella_1(){
document.getElementById('pp_estrella_1').style.color = '#7AB518'
document.getElementById('pp_estrella_2').style.color = '#888'
document.getElementById('pp_estrella_3').style.color = '#888'
document.getElementById('pp_estrella_4').style.color = '#888'
document.getElementById('pp_estrella_5').style.color = '#888'
document.getElementById('pp').value = '1'};
function pp_estrella_2(){
document.getElementById('pp_estrella_1').style.color = '#7AB518'
document.getElementById('pp_estrella_2').style.color = '#7AB518'
document.getElementById('pp_estrella_3').style.color = '#888'
document.getElementById('pp_estrella_4').style.color = '#888'
document.getElementById('pp_estrella_5').style.color = '#888'
document.getElementById('pp').value = '2'};
function pp_estrella_3(){
document.getElementById('pp_estrella_1').style.color = '#7AB518'
document.getElementById('pp_estrella_2').style.color = '#7AB518'
document.getElementById('pp_estrella_3').style.color = '#7AB518'
document.getElementById('pp_estrella_4').style.color = '#888'
document.getElementById('pp_estrella_5').style.color = '#888'
document.getElementById('pp').value = '3'};
function pp_estrella_4(){
document.getElementById('pp_estrella_1').style.color = '#7AB518'
document.getElementById('pp_estrella_2').style.color = '#7AB518'
document.getElementById('pp_estrella_3').style.color = '#7AB518'
document.getElementById('pp_estrella_4').style.color = '#7AB518'
document.getElementById('pp_estrella_5').style.color = '#888'
document.getElementById('pp').value = '4'};
function pp_estrella_5(){
document.getElementById('pp_estrella_1').style.color = '#7AB518'
document.getElementById('pp_estrella_2').style.color = '#7AB518'
document.getElementById('pp_estrella_3').style.color = '#7AB518'
document.getElementById('pp_estrella_4').style.color = '#7AB518'
document.getElementById('pp_estrella_5').style.color = '#7AB518'
document.getElementById('pp').value = '5'};
function amb_estrella_1(){
document.getElementById('amb_estrella_1').style.color = '#7AB518'
document.getElementById('amb_estrella_2').style.color = '#888'
document.getElementById('amb_estrella_3').style.color = '#888'
document.getElementById('amb_estrella_4').style.color = '#888'
document.getElementById('amb_estrella_5').style.color = '#888'
document.getElementById('amabilidad').value = '1'};
function amb_estrella_2(){
document.getElementById('amb_estrella_1').style.color = '#7AB518'
document.getElementById('amb_estrella_2').style.color = '#7AB518'
document.getElementById('amb_estrella_3').style.color = '#888'
document.getElementById('amb_estrella_4').style.color = '#888'
document.getElementById('amb_estrella_5').style.color = '#888'
document.getElementById('amabilidad').value = '2'};
function amb_estrella_3(){
document.getElementById('amb_estrella_1').style.color = '#7AB518'
document.getElementById('amb_estrella_2').style.color = '#7AB518'
document.getElementById('amb_estrella_3').style.color = '#7AB518'
document.getElementById('amb_estrella_4').style.color = '#888'
document.getElementById('amb_estrella_5').style.color = '#888'
document.getElementById('amabilidad').value = '3'};
function amb_estrella_4(){
document.getElementById('amb_estrella_1').style.color = '#7AB518'
document.getElementById('amb_estrella_2').style.color = '#7AB518'
document.getElementById('amb_estrella_3').style.color = '#7AB518'
document.getElementById('amb_estrella_4').style.color = '#7AB518'
document.getElementById('amb_estrella_5').style.color = '#888'
document.getElementById('amabilidad').value = '4'};
function amb_estrella_5(){
document.getElementById('amb_estrella_1').style.color = '#7AB518'
document.getElementById('amb_estrella_2').style.color = '#7AB518'
document.getElementById('amb_estrella_3').style.color = '#7AB518'
document.getElementById('amb_estrella_4').style.color = '#7AB518'
document.getElementById('amb_estrella_5').style.color = '#7AB518'
document.getElementById('amabilidad').value = '5'};
</script>

@section('content')

@if ($servicio->id_funcionario_selec != null and $calificacion_estado == false)
<div class="row center blue-color white-text sin-espacio">
	<div class="col s12 m8 offset-m2">
    	<div class="card blue-color-black white-text" id="card_funcionarios">
            <div class="card-content">
            	Este Enlace ya no esta disponible
            </div>
        </div>
        <br>
	</div>
@endif


@if ($servicio->id_funcionario_selec == null)
<div class="row center blue-color white-text sin-espacio">
	<div class="col s1">
		<br><br>
		<a href="/administracion" class="btn-floating btn-large green-color"><i class="material-icons">chevron_left</i></a>
	</div>
	<div class="col s11">
		<h1 class="titulo">Selecciona el funcionario para el servicio</h1>
	</div>
</div>


<div class="row center blue-color sin-espacio white-text">
	<br>
    <div class="col s12 m4">
    	<h2 class="titulo">Datos del Servicio</h2>
        <div class="card blue-color-light">
            <div class="card-content">
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">    </span>Fecha Servicio:</b> {{ $servicio->fecha_servicio }}</p>
                    </div>
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Hora Inicio:</span></b> {{ $servicio->hora_inicio }}</p>
                    </div>
               	</div>
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Plan:</span></b> {{ $servicio->plan }} Horas</p>
                    </div>
                    <div class="col s12 m6">
                        <p><b>Valor Plan: $ </b>
                            @php
                                echo number_format($servicio->valor_plan);
                            @endphp
                        </p>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Metodo de Pago:</span></b> {{ $servicio->metodo_pago }}</p>
                    </div>
                	<div class="col s12 m6">
                        <p><b><span class="green-texto">Estado:</span></b> {{ $servicio->estado }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col s12 m8">
    	<h2 class="titulo">Funcionarios Disponibles</h2>
    	<div class="card blue-color-black white-text" id="card_funcionarios">
            @if ($servicio->id_funcionario_1 != null)
                <form action="/seleccion/savefuncionario" method="post">
                {{ csrf_field() }}
                    <div class="card-content">
                        <div class="row">
                        	<input type="hidden" name="id_servicio" value="{{ $servicio->id }}">
                        </div>
                       	<div class="row">
                            @if ($errors->has('funcionario'))
                                @foreach ($errors->get('funcionario') as $error)
                                    <h5 class="left-align">
                                        <blockquote class="red-text">{{ $error }}</blockquote>
                                    </h5>
                                @endforeach
                            @endif
                            <div class="input-field col s12 m6">
                        		<div class="row">
                                    <div class="col s2">
                                    	<label>
                                        <input name="funcionario" type="radio" value="{{ $servicio->funcionario_1->id }}" class="@if ($errors->has('funcionario')) is-invalid    @endif"/>
                                        <span></span>
                                        </label>
                                    </div>
                                    <div class="col s10">
                                        <img src="{{ $servicio->funcionario_1->url_foto }}" style="width: 100%; height: 50%">
                                        <br>
                                        <span class="green-texto">Nombre:</span> {{ $servicio->funcionario_1->nombre_funcionario }}
                                        <br>
                                        <span class="green-texto">Numero de servicios:</span>
                                        @if ($i_1 == null)
                                            0
                                        @endif{{ $i_1 }}
                                        <br>
                                        <span class="green-texto">Servicios Calificados:</span> {{ $x_1 }}
                                        <br>
                                        <span class="green-texto">Calificaci√≥n Total:</span>  {{ round($cal_1, 2) }}
                                        <br>
                                        <br>
                                        <a href="/calificacion/funcionario/{{ $servicio->funcionario_1->id }}" class="green-texto" target="_blank">Ver calificaciones</a>
                                    </div>
                                </div>
                           	</div>
                            @if ($id_fun_2 != null)
                            <div class="input-field col s12 m6">
                                <div class="row">
                                    <div class="col s2">
                                        <label>
                                            <input name="funcionario" type="radio" value="{{ $servicio->funcionario_2->id }}" class="@if ($errors->has('funcionario')) is-invalid    @endif"/>
                                            <span></span>
                                        </label>
                                    </div>
	                                <div class="col s10">
	                                    <img src="{{ $servicio->funcionario_2->url_foto }}" style="width: 100%; height: 50%">
	                                    <br>
	                                    <span class="green-texto">Nombre:</span> {{ $servicio->funcionario_2->nombre_funcionario }}
	                                    <br>
	                                    <span class="green-texto">Numero de servicios:</span>
	                                    @if ($i_2 == null)
	                                        0
	                                    @endif{{ $i_2 }}
	                                    <br>
	                                    <span class="green-texto">Servicios Calificados:</span> {{ $x_2 }}
	                                    <br>
	                                    <span class="green-texto">Calificacion Total:</span> {{ round($cal_2, 2) }}
	                                    <br>
                                        <br>
	                                    <a href="/calificacion/funcionario/{{ $servicio->funcionario_2->id }}" class="green-texto" target="_blank">Ver calificaciones</a>
	                                </div>
                           		</div>
                       		</div>
                        	@endif
	                        @if ($id_fun_3 != null)
	                        <div class="input-field col s12 m6">
	                            <div class="row">
	                                <div class="col s2">
	                                    <label>
	                                       	<input name="funcionario" type="radio" value="{{ $servicio->funcionario_3->id }}" class="@if ($errors->has('funcionario')) is-invalid    @endif"/>
	                                        <span></span>
	                                    </label>
	                                </div>
	                                <div class="col s10">
	                                    <img src="{{ $servicio->funcionario_3->url_foto }}" style="width: 100%; height: 50%">
	                                    <br>
	                                    <span class="green-texto">Nombre:</span> {{ $servicio->funcionario_3->nombre_funcionario }}
	                                    <br>
	                                    <span class="green-texto">Numero de servicios:</span>
	                                    @if ($i_3 == null)
	                                        0
	                                    @endif{{ $i_3 }}
	                                    <br>
	                                    <span class="green-texto">Servicios Calificados:</span> {{ $x_3 }}
	                                    <br>
	                                    <span class="green-texto">Calificacion Total:</span> {{ round($cal_3, 2) }}
	                                    <br>
                                        <br>
	                                    <a href="/calificacion/funcionario/{{ $servicio->funcionario_3->id }}" class="green-texto" target="_blank">Ver calificaciones</a>
	                                </div>
	                            </div>
	                        </div>
	                        @endif
	                        @if ($id_fun_4 != null)
	                       	<div class="input-field col s12 m6">
	                            <div class="row">
	                                <div class="col s2">
	                                    <label>
	                                        <input name="funcionario" type="radio" value="{{ $servicio->funcionario_4->id }}" class="@if ($errors->has('funcionario')) is-invalid    @endif"/>
	                                        <span></span>
	                                    </label>
	                                </div>
	                                <div class="col s10">
	                                    <img src="{{ $servicio->funcionario_4->url_foto }}" style="width: 100%; height: 50%">
	                                    <br>
	                                    <span class="green-texto">Nombre:</span> {{ $servicio->funcionario_4->nombre_funcionario }}
	                                    <br>
	                                    <span class="green-texto">Numero de servicios:</span>
	                                    @if ($i_4 == null)
	                                        0
	                                    @endif{{ $i_4 }}
	                                    <br>
	                                    <span class="green-texto">Servicios Calificados:</span> {{ $x_4 }}
	                                    <br>
	                                    <span class="green-texto">Calificacion Total:</span> {{ round($cal_4, 2) }}
	                                    <br>
                                        <br>
	                                    <a href="/calificacion/funcionario/{{ $servicio->funcionario_4->id }}" class="green-texto" target="_blank">Ver calificaciones</a>
	                                </div>
	                            </div>
	                        </div>
	                        @endif
                    	</div>
                        <div class="row">
                            <div class="col s12 m6">
                                <label>
                                    <input name="funcionario" type="radio" value="1" class="@if ($errors->has('funcionario')) is-invalid    @endif"/>
                                    <span class="green-texto">Seleccionar aleatoriamente</span>
                                </label>
                   	        </div>
                        </div>
                    </div>
                    <div class="card-action">
                        <button class="btn green-color" type="submit">Seleccionar<i class="material-icons right">send</i>
                        </button>
                    </div>
            	</form>
            @endif
        </div>
    </div>
</div>
@endif


@if ($calificacion_estado == true)
<div class="row center blue-color white-text sin-espacio">
	<div class="col s1">
		<br><br>
		<a href="/administracion" class="btn-floating btn-large green-color"><i class="material-icons">chevron_left</i></a>
	</div>
	<div class="col s11">
		<h1>Calificacion de Servicio</h1>
	</div>
</div>


<div class="row center blue-color sin-espacio white-text">
	<br>
    <div class="col s12 m4">
    	<h2 class="titulo">Datos del Servicio</h2>
        <div class="card blue-color-light">
            <div class="card-content">
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Fecha Servicio:</span></b> {{ $servicio->fecha_servicio }}</p>
                    </div>
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Hora Inicio:</span></b> {{ $servicio->hora_inicio }}</p>
                    </div>
               	</div>
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Plan:</span></b> {{ $servicio->plan }} Horas</p>
                    </div>
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Valor Plan:</span></b> {{ $servicio->valor_plan }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col s12 m6">
                        <p><b><span class="green-texto">Metodo de Pago:</span></b> {{ $servicio->metodo_pago }}</p>
                    </div>
                	<div class="col s12 m6">
                        <p><b><span class="green-texto">Estado:</span></b> {{ $servicio->estado }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col s12 m8">
    	<h2 class="titulo">Funcionario {{ $servicio->funcionario_selec->nombre_funcionario }}</h2>
    	<div class="card blue-color-black" id="card_calificacion">
            <form action="/seleccion/savecalificacion" method="post">
            {{ csrf_field() }}
                <input type="hidden" name="id_funcionario" value="{{ $servicio->id_funcionario_selec }}">
                <input type="hidden" name="id_servicio" value="{{ $servicio->id }}">
                <div class="row center">
                    <div class="col s12">
                        <p>Selecciona la calificacion de tu servicio:</p>
                    <div class="row">
                        <div class="col s6">
                        	<p><span class="green-texto">Calidad:</span></p>
                        </div>
                        <div class="col s6">
                            <input id="calidad" type="hidden" name="calidad" class="@if ($errors->has('calidad')) is-invalid    @endif">
                            <div class="ec-stars-wrapper">
                                <a id="cal_estrella_1" href="#!" title="Votar con 1 estrellas" onclick="cal_estrella_1()">&#9733;</a>
                                <a id="cal_estrella_2" href="#!" title="Votar con 2 estrellas" onclick="cal_estrella_2()">&#9733;</a>
                                <a id="cal_estrella_3" href="#!" title="Votar con 3 estrellas" onclick="cal_estrella_3()">&#9733;</a>
                                <a id="cal_estrella_4" href="#!" title="Votar con 4 estrellas" onclick="cal_estrella_4()">&#9733;</a>
                                <a id="cal_estrella_5" href="#!" title="Votar con 5 estrellas" onclick="cal_estrella_5()">&#9733;</a>
                            </div>
                        </div>
                        <div class="col s12">
                            @if ($errors->has('calidad'))
                                @foreach ($errors->get('calidad') as $error)
                                    <h5 class="left-align">
                                        <blockquote class="red-text">{{ $error }}</blockquote>
                                    </h5>
                                @endforeach
                            @endif
                        </div>
                    </div>
                    <div class="row">
		                <div class="col s6">
                            <p><span class="green-texto">Puntualidad:</span></p>
                        </div>
                        <div class="col s6">
                            <input id="puntualidad" type="hidden" name="puntualidad" class="@if ($errors->has('puntualidad')) is-invalid    @endif">
                            <div class="ec-stars-wrapper">
                                <a id="pun_estrella_1" href="#!" title="Votar con 1 estrellas" onclick="pun_estrella_1()">&#9733;</a>
                                <a id="pun_estrella_2" href="#!" title="Votar con 2 estrellas" onclick="pun_estrella_2()">&#9733;</a>
                                <a id="pun_estrella_3" href="#!" title="Votar con 3 estrellas" onclick="pun_estrella_3()">&#9733;</a>
                                <a id="pun_estrella_4" href="#!" title="Votar con 4 estrellas" onclick="pun_estrella_4()">&#9733;</a>
                                <a id="pun_estrella_5" href="#!" title="Votar con 5 estrellas" onclick="pun_estrella_5()">&#9733;</a>
               	            </div>
                        </div>
                        <div class="col s12">
                            @if ($errors->has('puntualidad'))
                                @foreach ($errors->get('puntualidad') as $error)
                                    <h5 class="left-align">
                                        <blockquote class="red-text">{{ $error }}</blockquote>
                                    </h5>
                                @endforeach
                            @endif
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s6">
                            <p><span class="green-texto">Presentacion Personal:</span></p>
                        </div>
                        <div class="col s6">
                            <input id="pp" type="hidden" name="pp" class="@if ($errors->has('pp')) is-invalid    @endif">
                                <div class="ec-stars-wrapper">
		                            <a id="pp_estrella_1" href="#!" title="Votar con 1 estrellas" onclick="pp_estrella_1()">&#9733;</a>
                                    <a id="pp_estrella_2" href="#!" title="Votar con 2 estrellas" onclick="pp_estrella_2()">&#9733;</a>
                                    <a id="pp_estrella_3" href="#!" title="Votar con 3 estrellas" onclick="pp_estrella_3()">&#9733;</a>
                                    <a id="pp_estrella_4" href="#!" title="Votar con 4 estrellas" onclick="pp_estrella_4()">&#9733;</a>
                                    <a id="pp_estrella_5" href="#!" title="Votar con 5 estrellas" onclick="pp_estrella_5()">&#9733;</a>
                                </div>
                            </div>
                            <div class="col s12">
                            @if ($errors->has('pp'))
                                @foreach ($errors->get('pp') as $error)
                                    <h5 class="left-align">
                                        <blockquote class="red-text">{{ $error }}</blockquote>
                                    </h5>
                                @endforeach
                            @endif
                        </div>
        		        </div>
                        <div class="row">
                            <div class="col s6">
                                <p><span class="green-texto">Amabilidad:</span></p>
                            </div>
                            <div class="col s6">
                                <input id="amabilidad" type="hidden" name="amabilidad" class="@if ($errors->has('amabilidad')) is-invalid    @endif">
                                <div class="ec-stars-wrapper">
                                    <a id="amb_estrella_1" href="#!" title="Votar con 1 estrellas" onclick="amb_estrella_1()">&#9733;</a>
                                   <a id="amb_estrella_2" href="#!" title="Votar con 2 estrellas" onclick="amb_estrella_2()">&#9733;</a>
                                    <a id="amb_estrella_3" href="#!" title="Votar con 3 estrellas" onclick="amb_estrella_3()">&#9733;</a>
                                    <a id="amb_estrella_4" href="#!" title="Votar con 4 estrellas" onclick="amb_estrella_4()">&#9733;</a>
                                    <a id="amb_estrella_5" href="#!" title="Votar con 5 estrellas" onclick="amb_estrella_5()">&#9733;</a>
                                </div>
                            </div>
                            <div class="col s12">
                            @if ($errors->has('amabilidad'))
                                @foreach ($errors->get('amabilidad') as $error)
                                    <h5 class="left-align">
                                        <blockquote class="red-text">{{ $error }}</blockquote>
                                    </h5>
                                @endforeach
                            @endif
                        </div>
                        </div>
                    </div>
                    <div class="col s12">
			            <div class="input-field col s12">
                            <textarea id="comentario" name="comentario" class="materialize-textarea white-text"></textarea>
                            <label for="comentario" class="white-text">Escribe tus comentaios del servicio (opcional)</label>
                        </div>
                    </div>
               	</div>
                <div class="row center">
                    <button class="btn green-color" type="submit">Calificar<i class="material-icons right">send</i></button>
                    <br><br>
                </div>
          	</form>
        </div>
    </div>


</div>
@endif




@endsection